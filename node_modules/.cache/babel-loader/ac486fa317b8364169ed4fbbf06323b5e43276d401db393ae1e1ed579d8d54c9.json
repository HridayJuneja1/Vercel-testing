{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';// To get userId from the URL\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{userId}=useParams();// Extract userId from the route params\nconst[userInfo,setUserInfo]=useState(null);const[pastOrders,setPastOrders]=useState([]);const[readyForPickup,setReadyForPickup]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(!userId){setError(\"User ID is missing\");return;}// Define a function to fetch the dashboard data\nconst fetchDashboardData=async()=>{try{const response=await fetch(`/api/dashboard/${userId}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();setUserInfo(data.user);setPastOrders(data.pastOrders);setReadyForPickup(data.readyForPickup);setLoading(false);// Set loading to false once data is fetched\n}catch(err){console.error('Error fetching dashboard data:',err);setError(err.message);setLoading(false);// Even if there's an error, stop loading\n}};fetchDashboardData();},[userId]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[userInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",userInfo.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",userInfo.email]}),/*#__PURE__*/_jsx(\"button\",{children:\"Change Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"past-orders\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Past Orders\"}),pastOrders.length>0?/*#__PURE__*/_jsx(\"ul\",{children:pastOrders.map((order,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[order.title,\" by \",order.author,\" (Ordered on \",new Date(order.orderDate).toLocaleDateString(),\")\"]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No past orders found.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ready-for-pickup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Books Ready for Pickup\"}),readyForPickup.length>0?/*#__PURE__*/_jsx(\"ul\",{children:readyForPickup.map((book,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[book.title,\" by \",book.author,\" - Pickup at \",book.pickupLocation,\" on\",' ',new Date(book.pickupDate).toLocaleDateString(),\" at \",book.pickupTime]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No books ready for pickup.\"})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","Dashboard","userId","userInfo","setUserInfo","pastOrders","setPastOrders","readyForPickup","setReadyForPickup","loading","setLoading","error","setError","fetchDashboardData","response","fetch","ok","Error","status","data","json","user","err","console","message","children","className","name","email","length","map","order","index","title","author","Date","orderDate","toLocaleDateString","book","pickupLocation","pickupDate","pickupTime"],"sources":["/Users/hrida/SYST35300/samskritabharati/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom'; // To get userId from the URL\n\nconst Dashboard = () => {\n  const { userId } = useParams(); // Extract userId from the route params\n  const [userInfo, setUserInfo] = useState(null);\n  const [pastOrders, setPastOrders] = useState([]);\n  const [readyForPickup, setReadyForPickup] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!userId) {\n      setError(\"User ID is missing\");\n      return;\n    }\n\n    // Define a function to fetch the dashboard data\n    const fetchDashboardData = async () => {\n      try {\n        const response = await fetch(`/api/dashboard/${userId}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setUserInfo(data.user);\n        setPastOrders(data.pastOrders);\n        setReadyForPickup(data.readyForPickup);\n        setLoading(false); // Set loading to false once data is fetched\n      } catch (err) {\n        console.error('Error fetching dashboard data:', err);\n        setError(err.message);\n        setLoading(false); // Even if there's an error, stop loading\n      }\n    };\n\n    fetchDashboardData();\n  }, [userId]);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  return (\n    <div className=\"dashboard\">\n      {userInfo && (\n        <div className=\"user-info\">\n          <h2>Welcome, {userInfo.name}</h2>\n          <p>Email: {userInfo.email}</p>\n          <button>Change Password</button>\n        </div>\n      )}\n\n      <div className=\"content\">\n        <div className=\"past-orders\">\n          <h3>Past Orders</h3>\n          {pastOrders.length > 0 ? (\n            <ul>\n              {pastOrders.map((order, index) => (\n                <li key={index}>\n                  {order.title} by {order.author} (Ordered on {new Date(order.orderDate).toLocaleDateString()})\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>No past orders found.</p>\n          )}\n        </div>\n\n        <div className=\"ready-for-pickup\">\n          <h3>Books Ready for Pickup</h3>\n          {readyForPickup.length > 0 ? (\n            <ul>\n              {readyForPickup.map((book, index) => (\n                <li key={index}>\n                  {book.title} by {book.author} - Pickup at {book.pickupLocation} on{' '}\n                  {new Date(book.pickupDate).toLocaleDateString()} at {book.pickupTime}\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>No books ready for pickup.</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}